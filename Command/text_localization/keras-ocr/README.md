# Keras-OCR

Great OCR pipeline using Craft for text localization but with OCR
decoding as well. It only works on English though.

Installable as a python package (keras-ocr).

## Build Docker Image 

```bash
docker build -t apollo/keras-ocr .
```

## Example run

nvidia-docker works with or without GPU, but for this program to run,
you need more than 2GB of GPU memory.

```bash
nvidia-docker run --rm -it -w /app apollo/keras-ocr ./ocr_keras_wrapper.py Army_Reserves_Recruitment_Banner_MOD_45156284.jpg ./out.txt ./out.png
```

Output is array of [text, boundingbox] tuples.  Also see out.png.
```
[[('toodstande', array([[1329.2167 ,  199.50664],
       [1420.1775 ,  249.53513],
       [1411.6167 ,  265.10016],
       [1320.6559 ,  215.07169]], dtype=float32)), ('s', array([[1530.4688,  257.8125],
       [1546.875 ,  257.8125],
       [1546.875 ,  281.25  ],
       [1530.4688,  281.25  ]], dtype=float32)), ('somme', array([[1329.617  ,  263.08328],
       [1388.253  ,  290.85834],
       [1380.7128 ,  306.77676],
       [1322.0767 ,  279.0017 ]], dtype=float32)), ('srny', array([[1554.5955,  258.2261],
       [1636.282 ,  307.2381],
       [1618.2902,  337.2243],
       [1536.6036,  288.2123]], dtype=float32)), ('squadron', array([[1508.3682 ,  272.6082 ],
       [1668.7932 ,  360.5832 ],
       [1651.4851 ,  392.14508],
       [1491.0602 ,  304.17004]], dtype=float32)), ('ds', array([[1387.5    ,  297.65625],
       [1413.2812 ,  297.65625],
       [1413.2812 ,  316.40625],
       [1387.5    ,  316.40625]], dtype=float32)), ('quentn', array([[1354.3734 ,  335.27707],
       [1420.2642 ,  364.56183],
       [1413.2089 ,  380.43652],
       [1347.3181 ,  351.15173]], dtype=float32)), ('snhnen', array([[1527.1876 ,  367.50003],
       [1606.8751 ,  407.34378],
       [1598.4376 ,  424.2188 ],
       [1518.7501 ,  384.37506]], dtype=float32)), ('bnpnone', array([[1326.0372 ,  384.8195 ],
       [1392.2278 ,  413.18698],
       [1385.6815 ,  428.46176],
       [1319.491  ,  400.09427]], dtype=float32)), ('sasne', array([[1717.9688 ,  412.50003],
       [1778.9062 ,  442.96878],
       [1771.4064 ,  457.96878],
       [1710.4689 ,  427.50003]], dtype=float32)), ('taing', array([[1545.8798 ,  495.78336],
       [1628.3445 ,  533.26733],
       [1613.0137 ,  566.9949 ],
       [1530.549  ,  529.51086]], dtype=float32)), ('yeoms', array([[1502.7616,  700.7663],
       [1611.2533,  732.6756],
       [1601.214 ,  766.8093],
       [1492.7223,  734.9   ]], dtype=float32)), ('sry', array([[1614.4004 ,  740.9417 ],
       [1664.5693 ,  749.3032 ],
       [1659.7551 ,  778.18835],
       [1609.5862 ,  769.8269 ]], dtype=float32)), ('the', array([[ 632.1652 , 1042.3369 ],
       [ 826.58673, 1052.9417 ],
       [ 821.384  , 1148.3254 ],
       [ 626.9624 , 1137.7207 ]], dtype=float32)), ('royal', array([[ 851.76965, 1057.8455 ],
       [1120.3776 , 1066.7991 ],
       [1117.3081 , 1158.8843 ],
       [ 848.7002 , 1149.9307 ]], dtype=float32)), ('wessex', array([[1133.764 , 1076.1825],
       [1400.4955, 1092.8533],
       [1395.4341, 1173.8358],
       [1128.7026, 1157.165 ]], dtype=float32)), ('yeomanry', array([[1406.9282, 1099.6345],
       [1678.4349, 1115.9249],
       [1674.268 , 1185.3779],
       [1402.7611, 1169.0875]], dtype=float32)), ('regiment', array([[1832.8125, 1260.9375],
       [2027.3438, 1260.9375],
       [2027.3438, 1333.5938],
       [1832.8125, 1333.5938]], dtype=float32)), ('yeomanry', array([[1538.8921, 1271.2373],
       [1833.5771, 1254.3982],
       [1838.6117, 1342.5034],
       [1543.9265, 1359.3425]], dtype=float32)), ('wests', array([[1261.5537, 1273.8713],
       [1532.3221, 1267.1022],
       [1534.9148, 1370.8068],
       [1264.1465, 1377.5759]], dtype=float32)), ('south', array([[ 905.69385, 1280.1552 ],
       [1241.6047 , 1275.2153 ],
       [1243.3347 , 1392.86   ],
       [ 907.42395, 1397.7998 ]], dtype=float32)), ('the', array([[ 630.46173, 1289.9869 ],
       [ 878.0096 , 1283.0137 ],
       [ 881.54126, 1408.3875 ],
       [ 633.9934 , 1415.3606 ]], dtype=float32)), ('now', array([[1739.5929, 1379.8856],
       [1915.5332, 1371.5074],
       [1921.17  , 1489.8774],
       [1745.2297, 1498.2556]], dtype=float32)), ('recruiting', array([[1076.2244, 1453.8185],
       [1729.9187, 1385.0087],
       [1747.5256, 1552.2751],
       [1093.8314, 1621.0851]], dtype=float32)), ('arm', array([[2218.1611, 1428.1012],
       [2275.5652, 1420.9258],
       [2280.3967, 1459.5796],
       [2222.993 , 1466.755 ]], dtype=float32)), ('blon', array([[2224.151 , 1463.2314],
       [2270.8228, 1456.0511],
       [2273.5054, 1473.487 ],
       [2226.8335, 1480.6674]], dtype=float32)), ('wxybsqipsacomodn', array([[1635.0001, 1617.6562],
       [2081.5195, 1501.733 ],
       [2102.6172, 1582.997 ],
       [1656.0975, 1698.9202]], dtype=float32)), ('email', array([[1456.8278, 1666.955 ],
       [1633.825 , 1606.6151],
       [1659.1061, 1680.7734],
       [1482.1089, 1741.1133]], dtype=float32)), ('438300', array([[1031.5671, 1729.802 ],
       [1395.1224, 1640.1581],
       [1426.5634, 1767.6687],
       [1063.008 , 1857.3126]], dtype=float32)), ('01722', array([[ 574.36304, 1817.6733 ],
       [1008.7152 , 1728.3385 ],
       [1040.3806 , 1882.2979 ],
       [ 606.0284 , 1971.6328 ]], dtype=float32))]]

```
